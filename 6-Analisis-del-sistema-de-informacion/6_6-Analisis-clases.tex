
En este apartado se detalla la arquitectura de los subsistemas de análisis. Como se ha visto en el apartado anterior, el sistema se divide en dos subsistemas principales: 
\textbf{restapi} y \textbf{frontend}. El subsistema restapi contiene las clases que implementan la API REST y la lógica de negocio, mientras que el subsistema frontend abarca la interfaz de usuario.

Primero, se presentará el diagrama de paquetes para ofrecer una visión general de la estructura del sistema. Este diagrama ilustrará la organización y 
agrupación de los distintos elementos del sistema en paquetes, permitiendo una comprensión clara de su disposición y jerarquía.

A continuación, se analizará cada subsistema en detalle mediante un diagrama de componentes por cada subsistema. Se ha optado por un diagrama de componentes debido a que el sistema sigue una arquitectura MERN 
(MongoDB, Express, React, Node.js) y este tipo de diagrama aporta más valor que un diagrama de clases al reflejar más fielmente la estructura y relaciones entre los distintos módulos del sistema.

Finalmente, se describirán los componentes identificados en el diagrama, explicando su función específica dentro del sistema y las relaciones que mantienen con otros componentes. 
Esta descripción detallada permitirá entender el papel de cada componente en el funcionamiento global del sistema y cómo colaboran entre sí para cumplir con los objetivos del sistema.

Por último, una vez descritos en detalle cada subsistema, se explicará el diagrama de despliegue. Este diagrama mostrará cómo se distribuyen físicamente los componentes del sistema en el entorno de 
ejecución, especificando las configuraciones de hardware y software necesarias, así como las interconexiones entre los distintos nodos del sistema.


\subsection{Diagrama de paquetes} 
El sistema se divide en dos paquetes principales:
\begin{itemize}
    \item \textbf{restapi}: se corresponde con el \textit{backend} del sistema, contiene las clases que implementan la API REST del sistema y la lógica de negocio.
    \item \textbf{frontend}: se corresponde con el \textit{frontend} del sistema, contiene las clases que implementan la interfaz de usuario.
\end{itemize}

En la \coloredUnderline{\hyperlink{fig:6_5_Diagrama-Paquetes}{Figura \ref*{fig:6_5_Diagrama-Paquetes}: \nameref*{fig:6_5_Diagrama-Paquetes}}} se muestra el diagrama de paquetes del sistema.
\begin{figure}[H]
    \hypertarget{fig:6_5_Diagrama-Paquetes}{}
    \centering
    \includegraphics[width=0.8\linewidth]{figures/6-Analisis/6-Clases/6_5-vista_general-paquetes.png}
    \caption{Diagrama de Paquetes del Sistema}
    \label{fig:6_5_Diagrama-Paquetes}
\end{figure}

\subsection{Descripción de los Paquetes}
\subsubsection{restapi}
El paquete \textbf{restapi} contiene las clases que implementan la API REST del sistema y la lógica de negocio. Este paquete se divide en los siguientes subpaquetes:
\begin{itemize}
    \item \textbf{controllers}: contiene las clases que implementan los controladores de la API REST, se encargan de gestionar las peticiones HTTP y las respuestas. Se comunica con la base de datos.
    \item \textbf{models}: contiene las clases que implementan los modelos de datos del sistema.
    \item \textbf{routes}: contiene las clases que implementan las rutas de la API REST, se encargan de definir las rutas y los métodos HTTP asociados.
    \item \textbf{middlewares}: contiene las clases que implementan los middlewares de la API REST, se encargan de gestionar la autenticación y la autorización de los usuarios.
    \item \textbf{scripts}: contiene las clases que implementan los scripts de inicialización de la base de datos.
    \item \textbf{tests}: contiene las clases que implementan las pruebas unitarias de las clases de los otros subpaquetes.
\end{itemize}


\subsubsection{frontend}
El paquete \textbf{frontend} contiene los archivos que implementan la interfaz de usuario. Este paquete se divide en los siguientes subpaquetes:
\begin{itemize} 
    \item \textbf{src}: contiene los archivos que implementan la lógica de la interfaz de usuario.
    \begin{itemize}
        \item \textbf{api}: contiene los archivos que implementan la API del frontend, se encargan de gestionar las peticiones HTTP/HTTPS al backend.
        \item \textbf{views}: contiene los componentes que implementan las vistas de la interfaz de usuario. A su vez, se divide en los siguientes subpaquetes:
        \begin{itemize}
            \item \textbf{components}: contiene los archivos que implementan los componentes de la interfaz de usuario.
            \item \textbf{pages}: contiene las archivos que implementan las páginas de la interfaz de usuario.
        \end{itemize}
        \item \textbf{redux}: contiene las archivos que implementan los estados de Redux.
        \item \textbf{socket}: contiene las archivos que implementan la conexión con Socket.io.
        \item \textbf{shared}: contiene las archivos que implementan los tipos de datos compartidos entre las distintas partes de la interfaz de usuario.
        \item \textbf{utils}: contiene las archivos que implementan utilidades de la interfaz de usuario.
    \end{itemize}
    \item \textbf{public}: contiene los archivos estáticos de la interfaz de usuario.
    \item \textbf{tests}: contiene las clases que implementan las pruebas de la interfaz de usuario.
\end{itemize}

\subsection{Diagramas de Componentes}
En el estándar UML se define como componente: 
\begin{quote}
    \"Un Componente representa una parte modular de un sistema que encapsula su contenido y cuya manifestación es reemplazable dentro de su entorno.
[...]
Un Componente especifica un contrato formal de los servicios que proporciona a sus clientes y aquellos que requiere de otros Componentes o servicios en el sistema en términos de sus Interfaces proporcionadas y requeridas.
Un Componente es una unidad sustituible que puede ser reemplazada en tiempo de diseño o en tiempo de ejecución por un Componente que ofrece una funcionalidad equivalente basada en la compatibilidad de sus Interfaces. 
Siempre que el entorno sea totalmente compatible con las Interfaces proporcionadas y requeridas de un Componente, este podrá interactuar con dicho entorno."
\end{quote}

\begin{flushright}
    \cite[p. 209]{UMLomg2017}
\end{flushright}

En el contexto de este proyecto, un componente es una parte modular del sistema que encapsula su contenido y, que en un futuro, su funcionalidad podría ser ampliada o reemplazada por otra siempre que cumpla con las interfaces proporcionadas y requeridas.

\subsubsection{Diagrama de componentes del subsistema restapi}
A continuación, se presenta el diagrama de componentes del subsistema \textbf{restapi}. En este diagrama se muestran los componentes que forman parte del subsistema y las relaciones entre ellos.

    \begin{landscape}
    \begin{figure}[H]
        \hypertarget{fig:6_5_Diagrama-Componentes-restapi}{}
        \centering
        \includegraphics[width=1\linewidth]{figures/6-Analisis/6-Clases/6_5-Componentes-restapi.png}
        \caption{Diagrama de componentes del subsistema restapi}
        \label{fig:6_5_Diagrama-Componentes-restapi}
    \end{figure}
    \end{landscape}

\newpage

\input{6-Analisis-del-sistema-de-informacion/6_6-Clases/6-6_restapi}

\subsubsubsection{Descripción de los Componentes del Subsistema restapi}


\subsubsection{webapp}
A continuación, se presenta el diagrama de componentes del subsistema \textbf{webapp}. En este diagrama se muestran los componentes que forman parte del subsistema.
Se han omitido las relaciones entre los componentes para simplificar el diagrama. Las relaciones entre los componentes se explicarán en la descripción de los componentes.
\begin{landscape}
    \begin{figure}[H]
        \hypertarget{fig:6_5_Diagrama-Componentes-webapp}{}
        \centering
        \includegraphics[width=1\linewidth]{figures/6-Analisis/6-Clases/6_5-Componentes-webapp.png}
        \caption{Diagrama de componentes del subsistema webapp}
        \label{fig:6_5_Diagrama-Componentes-webapp}
    \end{figure}
    \end{landscape}

\newpage

\input{6-Analisis-del-sistema-de-informacion/6_6-Clases/6-6_webapp}