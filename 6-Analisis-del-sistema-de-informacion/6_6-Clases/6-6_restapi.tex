Por cada componente identificado en la \coloredUnderline{\hyperlink{fig:6_5_Diagrama-Componentes-restapi}{Figura \ref*{fig:6_5_Diagrama-Componentes-restapi}: \nameref*{fig:6_5_Diagrama-Componentes-restapi}}},
se ha creado una tabla con su descripción detallada, explicando su función específica dentro del sistema y las relaciones que mantiene con otros componentes.

\subsubsubsection{Descripción de componentes del subsistema restapi. \textit{Server} y \textit{App}}
%--- SERVER ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente:  Server} \label{table:descripcion_server} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{SERVER}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente:  Server -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{SERVER}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente configura y gestiona los servidores HTTP y HTTPS, la conexión a MongoDB, y la gestión de conexiones de sockets mediante Socket.IO. También incluye la configuración de variables de entorno y el manejo de errores. \\
    \midrule
    Métodos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{config()}: void, configura las variables de entorno.
      \item \textbf{createServers()}: void, crea y configura los servidores HTTP y HTTPS.
      \item \textbf{connectToDatabase()}: void, conecta a la base de datos MongoDB.
      \item \textbf{startServers()}: void, inicia los servidores HTTP y HTTPS.
      \item \textbf{setupSocketIO()}: void, configura el middleware de autenticación de sockets y maneja eventos de conexión y desconexión.
      \item \textbf{closeServer()}: Promise<void>, cierra los servidores HTTP, HTTPS y la conexión a la base de datos.
    \end{itemize} \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{App}: Usa el componente App, que configura las rutas de la API REST.
      \item \textbf{AuthSocket}: Usa el middleware de autenticación de sockets.
      \item \textbf{HTTP/HTTPS}: Para la conexión a los servidores HTTP y HTTPS.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{HTTP/HTTPS}: Proporciona la conexión a los servidores HTTP y HTTPS.
    \end{itemize} \\
\end{longtable}

%--- APP ---

\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente:  App} \label{table:descripcion_app} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{APP}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente:  App -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{APP}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente configura y gestiona las políticas CORS, las rutas de la API y el middleware para el manejo de errores. \\
    \midrule
    Métodos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{use()}: void, permite configurar las rutas y los middlewares de la aplicación.
      \item \textbf{listen()}: void, inicia el servidor en el puerto especificado.
      \item \textbf{errorHandler()}: void, middleware para manejar errores en la aplicación.
    \end{itemize} \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Endpoints}: Utiliza todas las rutas de la API REST, definidas en el paquete \textit{routes}. Estas son:
        \begin{itemize}[nosep,leftmargin=*]
        \item \textbf{AuctionRouter}: Rutas que gestionan las subastas.
        \item \textbf{BidRouter}: Rutas que gestionan las pujas.
        \item \textbf{CardPackRouter}: Rutas que gestionan los sobres de cartas.
        \item \textbf{CardRouter}: Rutas que gestionan las cartas.
        \item \textbf{DeckRouter}: Rutas que gestionan los mazos de cartas.
        \item \textbf{NotificationRouter}: Rutas que gestionan las notificaciones.
        \item \textbf{PaypalRouter}: Rutas que gestionan las transacciones de PayPal.
        \item \textbf{PurchasesRouter}: Rutas que gestionan las compras.
        \item \textbf{TransactionRouter}: Rutas que gestionan las transacciones propias de la aplicación.
        \item \textbf{UserCardRouter}: Rutas que gestionan las cartas de usuario.
        \item \textbf{UserRouter}: Rutas que gestionan los usuarios.
        \end{itemize}
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Configured endpoints}: Proporciona la aplicación de Express con las rutas y middlewares configurados.   
    \end{itemize} \\
\end{longtable}


%------------------------- PAQUETE MIDDLWARES -------------------------
\subsubsubsection{Descripción de componentes del subsistema restapi. Paquete \textit{middlewares}}\label{sec:descripcion_authmiddleware}
%--- AUTHMIDDLEWARE ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente:  AuthMiddleware} \label{table:descripcion_authmiddleware} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{AUTHMIDDLEWARE}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente:  AuthMiddleware -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{AUTHMIDDLEWARE}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente proporciona middleware para la autenticación y autorización de usuarios mediante tokens JWT. Incluye la verificación de tokens y la verificación de roles de administrador. \\
    \midrule
    Métodos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{auth(req: Request, res: Response, next: any)}: void, middleware para verificar la autenticidad del token JWT en las peticiones.
      \item \textbf{verifyAdmin(req: Request, res: Response, next: any)}: void, middleware para verificar que el usuario tiene rol de administrador.
    \end{itemize} \\
    \midrule
    Interfaces requeridas &  \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{User Authentication}: Proporciona middleware para la autenticación de usuarios, verificando la validez del token JWT y, ofreciendo la posibilidad de verificar roles de administrador.
    \end{itemize} \\
    \end{longtable}

%--- AUTHSOCKET ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente:  AuthSocket} \label{table:descripcion_authsocket} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{AUTHSOCKET}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente:  AuthSocket -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{AUTHSOCKET}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente proporciona el middleware para la autenticación de conexiones de sockets mediante tokens JWT. Verifica la validez y el formato del token proporcionado en el handshake de la conexión del socket. \\
    \midrule
    Métodos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{authSocket(socket: Socket, next: (err?: Error) => void)}: void, middleware para verificar la autenticidad del token JWT en las conexiones de sockets.
    \end{itemize} \\
    \midrule
    Interfaces requeridas &  \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Socket Authentication}: Proporciona middleware para la autenticación de conexiones de sockets, verificando la validez del token JWT.
    \end{itemize} \\
    \end{longtable}

%------------------------- PAQUETE ROUTES -------------------------
\subsubsection{Descripción de componentes del subsistema restapi. Paquete \textit{routes}}
En el diagrama se muestra una relación de dependencia entre \textit{App} y los componentes del paquete \textit{routes}. 
En la práctica, cada componente del paquete \textit{routes} proporciona sus rutas a \textit{App} a través su propia instancia de \textit{Router} de Express. 
Se ha decidido simplificar la representación para facilitar la comprensión del diagrama, dado que todos los componentes del paquete \textit{routes} mantienen la misma relación con \textit{App}.

%--- AUCTIONROUTER ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente:  AuctionRouter} \label{table:descripcion_auctionrouter} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{AUCTIONROUTER}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente:  AuctionRouter -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{AUCTIONROUTER}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente configura y gestiona las rutas relacionadas con las subastas en la aplicación Express. Incluye la autenticación mediante middleware y validaciones para las peticiones. \\
    \midrule
    Atributos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{auctionRouter}: Router, instancia del enrutador de Express para las subastas.
    \end{itemize} \\
    \midrule
    Métodos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{getAuctions(req: Request, res: Response)}: void, maneja la obtención de todas las subastas.
      \item \textbf{getAuction(req: Request, res: Response)}: void, maneja la obtención de una subasta por su ID.
      \item \textbf{getActiveAuctions(req: Request, res: Response)}: void, maneja la obtención de todas las subastas activas.
      \item \textbf{getActiveAuctionsByUser(req: Request, res: Response)}: void, maneja la obtención de todas las subastas activas de un usuario.
      \item \textbf{putUserCardUpForAuction(req: Request, res: Response)}: void, maneja la puesta en subasta de una carta de usuario.
      \item \textbf{withdrawnUserCardFromAuction(req: Request, res: Response)}: void, maneja la retirada de una carta de usuario de una subasta.
      \item \textbf{checkAllActiveAuctions(req: Request, res: Response)}: void, verifica todas las subastas activas y actualiza su estado si es necesario.
    \end{itemize} \\
    \midrule
    Interfaces requeridas &  \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{User Authentication}: Middleware para la autenticación de usuarios.
      \item \textbf{Auction MGMT.}: Utiliza los métodos definidos en el controlador de subastas, \textit{AuctionController}.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Auction Router}: Proporciona las rutas para la gestión de subastas.
    \end{itemize} \\
    \end{longtable}

%--- BIDROUTER ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente:  BidRouter} \label{table:descripcion_bidrouter} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{BIDROUTER}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente:  BidRouter -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{BIDROUTER}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente configura y gestiona las rutas relacionadas con las pujas en la aplicación Express. Incluye la autenticación mediante middleware y validaciones para las peticiones. \\
    \midrule
    Atributos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{bidRouter}: Router, instancia del enrutador de Express para las pujas.
    \end{itemize} \\
    \midrule
    Métodos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{getBidById(req: Request, res: Response)}: void, maneja la obtención de una puja por su ID.
      \item \textbf{createBid(req: Request, res: Response)}: void, maneja la creación de una nueva puja.
      \item \textbf{getActiveBidsByUser(req: Request, res: Response)}: void, maneja la obtención de todas las pujas activas de un usuario.
      \item \textbf{withdrawBid(req: Request, res: Response)}: void, maneja la retirada de una puja.
    \end{itemize} \\
    \midrule
    Relaciones & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{AuthMiddleware}: Middleware para la autenticación de usuarios.
      \item \textbf{BidController}: Importa y utiliza métodos del controlador de pujas.
    \end{itemize} \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{User Authentication}: Middleware para la autenticación de usuarios.
      \item \textbf{Bid MGMT.}: Utiliza los métodos definidos en el controlador de pujas, \textit{BidController}.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Bid Router}: Proporciona las rutas para la gestión de pujas.
    \end{itemize} \\
    \end{longtable}

\subsubsubsection{Descripción del componente:  CardPackRouter} \label{sec:descripcion_cardpackrouter}
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente:  CardPackRouter} \label{table:descripcion_cardpackrouter} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{CARDPACKROUTER}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente:  CardPackRouter -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{CARDPACKROUTER}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente configura y gestiona las rutas relacionadas con los sobres de cartas en la aplicación Express. Incluye la autenticación mediante middleware. \\
    \midrule
    Métodos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{getCardPacks(req: Request, res: Response)}: void, maneja la obtención de todos los sobres de cartas.
    \end{itemize} \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{User Authentication}: Middleware para la autenticación de usuarios.
      \item \textbf{CardPack MGMT.}: Utiliza los métodos definidos en el controlador de sobres de cartas, \textit{CardPackController}.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{CardPack Router}: Proporciona las rutas para la gestión de sobres de cartas.
    \end{itemize} \\
    \end{longtable}


%--- CARDROUTER ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente:  CardRouter} \label{table:descripcion_cardrouter} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{CARDROUTER}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente:  CardRouter -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{CARDROUTER}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Esta clase configura y gestiona las rutas relacionadas con las cartas en la aplicación Express. Incluye la autenticación mediante middleware y validaciones para las peticiones. \\
    \midrule
    Métodos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{getCard(req: Request, res: Response)}: void, maneja la obtención de una carta por su ID.
    \end{itemize} \\
    \midrule
    Interfaces requeridas  & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{User Authentication}: Middleware para la autenticación de usuarios.
      \item \textbf{Card MGMT.}: Utiliza los métodos definidos en el controlador de cartas, \textit{CardController}.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
        \item \textbf{Card Router}: Proporciona las rutas para la gestión de cartas.
    \end{itemize} \\
    \end{longtable}

% --- NOTIFICATIONROUTER ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente:  NotificationRouter} \label{table:descripcion_notificationrouter} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{NOTIFICATIONROUTER}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente:  NotificationRouter -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{NOTIFICATIONROUTER}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente configura y gestiona las rutas relacionadas con las notificaciones en la aplicación Express. Incluye la autenticación mediante middleware y validaciones para las peticiones. \\
    \midrule
    Atributos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{notificationRouter}: Router, instancia del enrutador de Express para las notificaciones.
    \end{itemize} \\
    \midrule
    Métodos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{getNotifications(req: Request, res: Response)}: void, maneja la obtención de todas las notificaciones de un usuario.
      \item \textbf{markAsRead(req: Request, res: Response)}: void, maneja el marcado de una notificación como leída.
      \item \textbf{markAllAsRead(req: Request, res: Response)}: void, maneja el marcado de todas las notificaciones de un usuario como leídas.
      \item \textbf{hasUnreadNotifications(req: Request, res: Response)}: void, verifica si un usuario tiene notificaciones no leídas.
    \end{itemize} \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{User Authentication}: Middleware para la autenticación de usuarios.
      \item \textbf{Notification MGMT.}: Utiliza los métodos definidos en el controlador de notificaciones, \textit{NotificationController}.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
        \item \textbf{Notification Router}: Proporciona las rutas para la gestión de notificaciones.
    \end{itemize} \\
    \end{longtable}

%--- PAYPALROUTER ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente:  PaypalRouter} \label{table:descripcion_paypalrouter} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{PAYPALROUTER}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente:  PaypalRouter -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{PAYPALROUTER}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente configura y gestiona las rutas relacionadas con las órdenes de PayPal en la aplicación Express. Incluye validaciones para las peticiones y manejo de errores. \\
    \midrule
    Métodos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{createOrder(req: Request, res: Response)}: void, maneja la creación de una nueva orden de PayPal.
      \item \textbf{updateOrder(req: Request, res: Response)}: void, maneja la actualización del saldo de un usuario después de completar un pago.
    \end{itemize} \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Paypal MGMT.}: Utiliza los métodos definidos en el controlador de PayPal, \textit{PaypalController}.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Paypal Router}: Proporciona las rutas para la gestión de órdenes de PayPal.
    \end{itemize} \\
    \end{longtable}

%------------------------- PAQUETE CONTROLLERS -------------------------
\subsubsubsection{Descripción de componentes del subsistema restapi. Paquete \textit{controllers}}
En el diagrama se muestra una relación de dependencia entre los componentes del paquete \textit{controllers} y los componentes del paquete \textit{models}.
En la práctica, cada componente del paquete \textit{controllers} se puede comunicar con cualquier componente del paquete \textit{models} para realizar operaciones de lectura y escritura en la base de datos.

%--- AUCTIONCONTROLLER ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente: AuctionController} \label{table:descripcion_auctioncontroller} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{AUCTIONCONTROLLER}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente: AuctionController -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{AUCTIONCONTROLLER}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente gestiona las operaciones relacionadas con las subastas en la aplicación Express, incluyendo la recuperación, creación y actualización de subastas, así como la gestión de pujas y la transferencia de cartas. \\
    \midrule
    Métodos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{getAuctions(req: Request, res: Response)}: void, recupera todas las subastas activas disponibles en la base de datos.
      \item \textbf{getAuction(req: Request, res: Response)}: void, recupera una subasta específica por su ID.
      \item \textbf{getActiveAuctions(req: Request, res: Response)}: void, recupera todas las subastas activas, excluyendo las del usuario actual.
      \item \textbf{getActiveAuctionsByUser(req: Request, res: Response)}: void, recupera todas las subastas activas asociadas a un usuario específico.
      \item \textbf{putUserCardUpForAuction(req: Request, res: Response)}: void, pone una carta en subasta, realizando una serie de validaciones y creando registros asociados.
      \item \textbf{withdrawnUserCardFromAuction(req: Request, res: Response)}: void, retira una carta de la subasta, actualizando su estado y cancelando la subasta.
      \item \textbf{checkAllActiveAuctions(req: Request, res: Response)}: void, verifica todas las subastas activas y cierra aquellas que han finalizado, determinando los ganadores.
      \item \textbf{checkWinnerBid(auction: IAuction, session: any)}: Promise, verifica el ganador de una subasta y procesa la transferencia de la carta al mismo.
      \item \textbf{transferCard(auction: IAuction, bid: IBid, session: any)}: Promise, transfiere una carta de un usuario vendedor a un usuario comprador, registrando las transacciones de venta y compra.
    \end{itemize} \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Auction}: Utiliza el modelo de datos de subasta.
      \item \textbf{Bid}: Utiliza el modelo de datos de puja.
      \item \textbf{Notification}: Utiliza el modelo de datos de notificación.
      \item \textbf{Transaction}: Utiliza el modelo de datos de transacción.
      \item \textbf{User}: Utiliza el modelo de datos de usuario.
      \item \textbf{UserCard}: Utiliza el modelo de datos de cartas de usuario.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Auction Controller}: Proporciona las funcionalidades de gestión de subastas.
    \end{itemize} \\
    \end{longtable}

%--- BIDCONTROLLER ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente: BidController} \label{table:descripcion_bidcontroller} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{BIDCONTROLLER}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente: BidController -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{BIDCONTROLLER}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente gestiona las operaciones relacionadas con las pujas en subastas de la aplicación Express, incluyendo la creación, recuperación y retirada de pujas. \\
    \midrule
    Métodos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{createBid(req: Request, res: Response)}: void, realiza una puja por una carta en una subasta.
      \item \textbf{getActiveBidsByUser(req: Request, res: Response)}: void, obtiene todas las pujas activas realizadas por un usuario específico.
      \item \textbf{withdrawBid(req: Request, res: Response)}: void, retira una puja realizada por un usuario en una subasta específica.
      \item \textbf{getBidById(req: Request, res: Response)}: void, recupera una puja específica por su identificador.
    \end{itemize} \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Auction}: Utiliza el modelo de datos de subasta.
      \item \textbf{Bid}: Utiliza el modelo de datos de puja.
      \item \textbf{Transaction}: Utiliza el modelo de datos de transacción.
      \item \textbf{User}: Utiliza el modelo de datos de usuario.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Bid Controller}: Proporciona las funcionalidades de gestión de pujas.
    \end{itemize} \\
\end{longtable}

%--- CARDPACKCONTROLLER ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente: CardController} \label{table:descripcion_cardcontroller} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{CARDCONTROLLER}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente: CardController -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{CARDCONTROLLER}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente gestiona las operaciones relacionadas con las cartas en la aplicación Express, incluyendo la obtención de cartas por ID. \\
    \midrule
    Métodos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{getCard(req: Request, res: Response)}: void, obtiene una carta por su ID.
      \item \textbf{getCardById(id: any, session: ClientSession)}: Promise<ICard | null>, obtiene una carta por su ID de tipo \textit{mongoose.Types.ObjectId} en una sesión de base de datos.
    \end{itemize} \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Card}: Utiliza el modelo de datos de carta.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Card Controller}: Proporciona las funcionalidades de gestión de cartas.
    \end{itemize} \\
\end{longtable}




%--- CARDPACKCONTROLLER ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente: CardPackController} \label{table:descripcion_cardpackcontroller} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{CARDPACKCONTROLLER}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente: CardPackController -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{CARDPACKCONTROLLER}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente gestiona las operaciones relacionadas con los sobres de cartas en la aplicación Express, incluyendo la obtención de todos los sobres de cartas disponibles. \\
    \midrule
    Métodos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{getCardPacks(req: Request, res: Response)}: void, obtiene todos los sobres de cartas registrados en la base de datos.
    \end{itemize} \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{CardPack}: Utiliza el modelo de datos de sobres de cartas.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{CardPackController}: Proporciona las funcionalidades de gestión de sobres de cartas.
    \end{itemize} \\
    \end{longtable}


%--- DECKCONTROLLER ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente: DeckController} \label{table:descripcion_deckcontroller} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{DECKCONTROLLER}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente: DeckController -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{DECKCONTROLLER}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente gestiona las operaciones relacionadas con los mazos de cartas en la aplicación Express, incluyendo la obtención de todos los mazos disponibles y la recuperación de un mazo específico por su ID. \\
    \midrule
    Métodos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{getDecks(req: Request, res: Response)}: void, obtiene todos los mazos de cartas registrados en la base de datos.
      \item \textbf{getDeck(req: Request, res: Response)}: void, obtiene un mazo de cartas por su ID.
      \item \textbf{getDeckByDeckId(deckId: string, session: ClientSession)}: Promise<IDeck | null>, obtiene las cartas de un mazo por su ID en una sesión de base de datos.
    \end{itemize} \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Deck}: Utiliza el modelo de datos de mazo de cartas.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Deck Controller}: Proporciona las funcionalidades de gestión de mazos de cartas.
    \end{itemize} \\
    \end{longtable}

%--- NOTIFICATIONCONTROLLER ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente: NotificationController} \label{table:descripcion_notificationcontroller} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{NOTIFICATIONCONTROLLER}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente: NotificationController -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{NOTIFICATIONCONTROLLER}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente gestiona las operaciones relacionadas con las notificaciones en la aplicación Express, incluyendo la recuperación de notificaciones, el marcado como leídas y el envío de notificaciones en tiempo real. \\
    \midrule
    Métodos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{getNotifications(req: Request, res: Response)}: void, recupera el histórico de notificaciones de un usuario específico.
      \item \textbf{markAsRead(req: Request, res: Response)}: void, marca una notificación específica como leída.
      \item \textbf{markAllAsRead(req: Request, res: Response)}: void, marca todas las notificaciones de un usuario como leídas.
      \item \textbf{hasUnreadNotifications(req: Request, res: Response)}: void, comprueba si el usuario tiene notificaciones sin leer.
      \item \textbf{sendNotification(notification: INotification)}: void, envía una notificación a un usuario específico.
      \item \textbf{sendRealTimeNotification(notification: INotification)}: void, envía una notificación en tiempo real.
    \end{itemize} \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Notification}: Utiliza el modelo de datos de notificación.
      \item \textbf{User}: Utiliza el modelo de datos de usuario.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Notification Controller}: Proporciona las funcionalidades de gestión de notificaciones.
    \end{itemize} \\
    \end{longtable}


%--- PAYPALCONTROLLER ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente: PaypalController} \label{table:descripcion_paypalcontroller} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{PAYPALCONTROLLER}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente: PaypalController -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{PAYPALCONTROLLER}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente gestiona las operaciones relacionadas con la integración de la API de PayPal en la aplicación Express, incluyendo la generación de tokens de acceso y la creación de órdenes de pago. \\
    \midrule
    Métodos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{generateAccessToken()}: Promise\<string\>, genera un token de acceso a la API de PayPal.
      \item \textbf{handleResponse(response: any)}: Promise\<\{jsonResponse: any, httpStatusCode: number\}\>, maneja la respuesta de la API de PayPal.
      \item \textbf{createOrder(username: string, balance: number, total: number)}: Promise\<\{jsonResponse: any, httpStatusCode: number\}\>, crea una orden de PayPal para recargar el saldo del usuario.
    \end{itemize} \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{User}: Utiliza el modelo de datos de usuario para la actualización del saldo.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Paypal Controller}: Proporciona las funcionalidades de integración con PayPal.
    \end{itemize} \\
    \end{longtable}

%--- PURCHASECONTROLLER ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente: PurchaseController} \label{table:descripcion_cardpackpurchasecontroller} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{PURCHASECONTROLLER}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente: PurchaseController -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{PURCHASECONTROLLER}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente gestiona las operaciones relacionadas con la compra de paquetes de cartas en la aplicación Express, incluyendo la verificación de disponibilidad, generación de cartas y actualización del saldo del usuario. \\
    \midrule
    Métodos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{purchaseCardPack(req: Request, res: Response)}: Promise\<void\>, permite comprar un paquete de cartas.
      \item \textbf{generateCards(deckId: string, quantity: number, session: ClientSession)}: Promise\<ICard[]\>, genera cartas aleatorias de un mazo.
    \end{itemize} \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Card}: Utiliza el modelo de datos de carta.
      \item \textbf{CardPack}: Utiliza el modelo de datos de paquete de cartas.
      \item \textbf{Deck}: Utiliza el modelo de datos de mazo de cartas.
      \item \textbf{Transaction}: Utiliza el modelo de datos de transacción.
      \item \textbf{User}: Utiliza el modelo de datos de usuario.
      \item \textbf{UserCard}: Utiliza el modelo de datos de carta de usuario.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Purchase Controller}: Proporciona las funcionalidades de compra de paquetes de cartas.
    \end{itemize} \\
    \end{longtable}

%--- TRANSACTIONCONTROLLER ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente: TransactionController} \label{table:descripcion_transactioncontroller} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{TRANSACTIONCONTROLLER}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente: TransactionController -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{TRANSACTIONCONTROLLER}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente gestiona las operaciones relacionadas con las transacciones en la aplicación Express, incluyendo la obtención de todas las transacciones, transacciones por nombre de usuario y transacciones por ID de carta de usuario. \\
    \midrule
    Métodos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{getTransactions(req: Request, res: Response)}: Promise\<void\>, obtiene todas las transacciones registradas en la base de datos.
      \item \textbf{getTransactionsByUsername(req: Request, res: Response)}: Promise\<void\>, obtiene todas las transacciones de un usuario por su nombre de usuario.
      \item \textbf{getTransactionsByUserCardId(req: Request, res: Response)}: Promise\<void\>, obtiene todas las transacciones de cartas para el ID (ObjectId) de la carta de usuario.
    \end{itemize} \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Transaction}: Utiliza el modelo de datos de transacción.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Transaction Controller}: Proporciona las funcionalidades de gestión de transacciones.
    \end{itemize} \\
    \end{longtable}

%--- USERCARDCONTROLLER ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente: UserCardController} \label{table:descripcion_usercardcontroller} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{USERCARDCONTROLLER}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente: UserCardController -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{USERCARDCONTROLLER}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente gestiona las operaciones relacionadas con las cartas de usuario en la aplicación Express, incluyendo la obtención de todas las cartas de un usuario por su nombre de usuario y la obtención de una carta específica por su ID. \\
    \midrule
    Métodos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{getUserCards(req: Request, res: Response)}: Promise\<void\>, obtiene todas las cartas de un usuario por su nombre de usuario.
      \item \textbf{getUserCard(req: Request, res: Response)}: Promise\<void\>, obtiene una carta de un usuario dado el ID de la carta.
    \end{itemize} \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{UserCard}: Utiliza el modelo de datos de carta de usuario.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{UserCardController}: Proporciona las funcionalidades de gestión de cartas de usuario.
    \end{itemize} \\
    \end{longtable}


%--- USERCONTROLLER ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente: UserController} \label{table:descripcion_usercontroller} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{USERCONTROLLER}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente: UserController -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{USERCONTROLLER}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente gestiona las operaciones relacionadas con los usuarios en la aplicación Express, incluyendo la creación, autenticación, y actualización de datos del usuario. \\
    \midrule
    Métodos & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{createUser(req: Request, res: Response)}: Promise\<void\>, permite crear un nuevo usuario.
      \item \textbf{loginUser(req: Request, res: Response)}: Promise\<void\>, permite iniciar sesión a un usuario.
      \item \textbf{getUser(req: Request, res: Response)}: Promise\<void\>, permite obtener un usuario por su nombre de usuario.
      \item \textbf{updateUserAvatar(req: Request, res: Response)}: Promise\<void\>, permite actualizar la imagen de perfil de un usuario.
      \item \textbf{updateUserPassword(req: Request, res: Response)}: Promise\<void\>, permite actualizar la contraseña de un usuario.
    \end{itemize} \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{bcrypt}: Utiliza la biblioteca \textit{bcrypt} para hashing de contraseñas.
      \item \textbf{jsonwebtoken}: Utiliza la biblioteca \textit{jsonwebtoken} para la creación de tokens JWT.
      \item \textbf{yup}: Utiliza la biblioteca \textit{yup} para validaciones de esquema.
      \item \textbf{User}: Utiliza el modelo de datos de usuario.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{UserController}: Proporciona las funcionalidades de gestión de usuarios.
    \end{itemize} \\
    \end{longtable}


%------------------------- PAQUETE MODELS -------------------------
\subsubsubsection{Descripción de componentes del subsistema restapi. Paquete \textit{models}}
Los componentes del paquete \textit{models} definen los esquemas de datos utilizados para almacenar la información en la base de datos MongoDB. 
Cada componente del paquete \textit{models} se corresponde con una colección de la base de datos, salvo el componente \textit{utils}, que encapsula funciones auxiliares para la definición de esquemas.

%--- AUCTION ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente: Auction} \label{table:descripcion_auction} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{AUCTION}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente: Auction -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{AUCTION}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente define el esquema y el modelo de datos para las subastas en la aplicación utilizando Mongoose. Proporciona una estructura para almacenar y gestionar la información de las subastas, incluyendo la tarjeta en subasta, el vendedor, el precio inicial, el estado de la subasta y las pujas asociadas. \\
    \midrule
    Métodos & \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Utils}: Utiliza el enum \textit{AuctionStatus} para definir los posibles estados de una subasta.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Auction}: Proporciona el modelo de datos para gestionar las subastas.
    \end{itemize} \\
    \end{longtable}


%--- BID ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente: Bid} \label{table:descripcion_bid} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{BID}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente: Bid -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{BID}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente define el esquema y el modelo de datos para las pujas en la aplicación utilizando Mongoose. Proporciona una estructura para almacenar y gestionar la información de las pujas, incluyendo la subasta, el usuario que realiza la puja, la carta en puja y el estado de la puja. \\
    \midrule
    Métodos & \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Utils}: Utiliza el enum \textit{BidStatus} para definir los posibles estados de una puja.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Bid}: Proporciona el modelo de datos para gestionar las pujas.
    \end{itemize} \\
    \end{longtable}

%--- CARD ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente: Card} \label{table:descripcion_card} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{CARD}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente: Card -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{CARD}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente define el esquema y el modelo de datos para las cartas en la aplicación utilizando Mongoose. Proporciona una estructura para almacenar y gestionar la información de las cartas de Pokémon, incluyendo sus atributos, tipo, rareza y estadísticas. \\
    \midrule
    Métodos & \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Utils}: Utiliza los enums \textit{CardRarity}, \textit{PokemonGym} y \textit{PokemonType} para definir las características de las cartas.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Card}: Proporciona el modelo de datos para gestionar las cartas.
    \end{itemize} \\
    \end{longtable}

%--- CARDPACK ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente: CardPack} \label{table:descripcion_card} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{CARDPACK}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente: CardPack -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{CARDPACK}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente define el esquema y el modelo de datos para los sobres cartas en la aplicación utilizando Mongoose. Proporciona una estructura para almacenar y gestionar la información de los sobres de cartas, incluyendo el nombre, precio y el tipo de cartas que contiene. \\
    \midrule
    Métodos & \\
    \midrule
    Interfaces requeridas &  \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{CardPack}: Proporciona el modelo de datos para gestionar los sobres de cartas.
    \end{itemize} \\
    \end{longtable}

%--- DECK ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente: Deck} \label{table:descripcion_deck} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{DECK}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente: Deck -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{DECK}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente define el esquema y el modelo de datos para los mazos en la aplicación utilizando Mongoose. Proporciona una estructura para almacenar y gestionar la información de los mazos de cartas, incluyendo su ID, nombre, tipo, fecha de publicación y las cartas que contiene. \\
    \midrule
    Métodos & \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Utils}: Utiliza el enum \textit{CardRarity} para definir el tipo de mazo.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Deck}: Proporciona el modelo de datos para gestionar los mazos.
    \end{itemize} \\
    \end{longtable}


%--- NOTIFICATION ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente: Notification} \label{table:descripcion_notification} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{NOTIFICATION}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente: Notification -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{NOTIFICATION}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente define el esquema y el modelo de datos para las notificaciones en la aplicación utilizando Mongoose. Proporciona una estructura para almacenar y gestionar las notificaciones, incluyendo el usuario asociado, el tipo de notificación, el mensaje, la importancia y si es en tiempo real. \\
    \midrule
    Métodos & \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Utils}: Utiliza los enums \textit{NotificationType} y \textit{NotificationImportance} para definir las características de las notificaciones.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Notification}: Proporciona el modelo de datos para gestionar las notificaciones.
    \end{itemize} \\
    \end{longtable}

%--- TRANSACTION ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente: Transaction} \label{table:descripcion_transaction} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{TRANSACTION}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente: Transaction -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{TRANSACTION}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente define el esquema y el modelo de datos para las transacciones en la aplicación utilizando Mongoose. Proporciona una estructura para almacenar y gestionar las transacciones realizadas por los usuarios, incluyendo la compra y venta de cartas, las subastas y las pujas. \\
    \midrule
    Métodos & \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Utils}: Utiliza el enum \textit{TransactionConcept} para definir los conceptos de las transacciones.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Transaction}: Proporciona el modelo de datos para gestionar las transacciones.
    \end{itemize} \\
    \end{longtable}


%--- USER ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente: User} \label{table:descripcion_user} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{USER}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente: User -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{USER}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente define el esquema y el modelo de datos para los usuarios en la aplicación utilizando Mongoose. Proporciona una estructura para almacenar y gestionar la información de los usuarios, incluyendo nombre de usuario, contraseña, imagen de perfil, fecha de nacimiento, saldo y rol de usuario. \\
    \midrule
    Métodos & \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Mongoose}: Utiliza la biblioteca \textit{Mongoose} para la definición del esquema y el modelo.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{User}: Proporciona el modelo de datos para gestionar los usuarios.
    \end{itemize} \\
    \end{longtable}


%--- USERCARD ---
\begin{longtable}{
    >{\columncolor{lightgreen!20}}p{4cm}
    p{12cm}
    }
    \caption{Descripción del componente: UserCard} \label{table:descripcion_usercard} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{USERCARD}} \\
    \endfirsthead
    
    \multicolumn{2}{c}%
    {{ \tablename\ \thetable{} Descripción del componente: UserCard -- continuación de la página anterior}} \\
    \toprule
    \rowcolor{darkgreen!50}
    \textbf{Componente} & \multicolumn{1}{>{\columncolor{darkgreen!50}\centering\arraybackslash}p{12cm}}{\textbf{USERCARD}} \\
    \midrule
    \endhead
    
    \midrule
    \multicolumn{2}{r}{{Continúa en la siguiente página...}} \\ 
    \endfoot
    
    \bottomrule
    \endlastfoot
    
    \midrule
    Descripción & Este componente define el esquema y el modelo de datos para las cartas de usuario en la aplicación utilizando Mongoose. Proporciona una estructura para almacenar y gestionar la información de las cartas que pertenecen a los usuarios, incluyendo la referencia a la carta, el usuario propietario, el estado de la carta y el historial de transacciones. \\
    \midrule
    Métodos & \\
    \midrule
    Interfaces requeridas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{Utils}: Utiliza el enum \textit{CardStatus} para definir los posibles estados de una carta de usuario.
    \end{itemize} \\
    \midrule
    Interfaces proporcionadas & \begin{itemize}[nosep,leftmargin=*]
      \item \textbf{UserCard}: Proporciona el modelo de datos para gestionar las cartas de usuario.
    \end{itemize} \\
    \end{longtable}
